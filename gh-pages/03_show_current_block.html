<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>03 Show Current Block &mdash; SensorCraft 1 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="SensorCraft 1 documentation" href="index.html" />
    <link rel="next" title="04 Play with Gravity" href="04_play_with_gravity.html" />
    <link rel="prev" title="02 3D Coordinate System" href="02_3D_coordinate_system.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="show-current-block">
<h1>03 Show Current Block<a class="headerlink" href="#show-current-block" title="Permalink to this headline">Â¶</a></h1>
<p>One thing about SensorCraft that is annoying is the GUI does not show the
current block selected.  Sometimes you forget which block is selected and will
place the wrong block accidentally.  A simple way to remedy this problem
is extend the &#8220;draw_label&#8221; method which we talked about in the previous chapter
that shows the numbers in the upper left corner:</p>
<div class="figure align-center">
<img alt="_images/fps_and_coords_text.png" src="_images/fps_and_coords_text.png" />
</div>
<p>To get started with this programming exercise first copy
02_3D_coordinate_system_TVR.py code to a new file
03_show_current_block_TVR.py but replace TVR with your initials using the
following command:</p>
<div class="highlight-python"><div class="highlight"><pre>cp 02_3D_coordinate_system_TVR.py 03_show_current_block_TVR.py.py
</pre></div>
</div>
<p>This command will start a new file with all the traits of the last exercise
being the world is flat, press the B key a wall will be constructed, and the
three number lines exist on each axis. How do you think the &#8220;draw_label&#8221; method
should be extended to also display the block that is currently selected?  If you
examine the __init__ method for the class called Window on line 435 - 494 you
will notice many variables are being initiated.  These variables have comments
above them that describe the purpose of the variables which is convenient for us
because we didn&#8217;t write the original code.  Take special note of the variable
&#8216;self.block&#8217; on line 477 which contains the current block the user can place.
Using an if/elif construct like we did in the programming exercise on building
automatically we can examine the variable &#8216;self.block&#8217; then build the proper
text.  Jump down to line 836 where the draw_label method lives and we changed
the code to look like the following:</p>
<div class="highlight-python"><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">draw_label</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Draw the label in the top left of the screen. Label includes</span>
<span class="sd">            the current block selection.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># determines the current block selected</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">==</span> <span class="n">BRICK</span><span class="p">):</span>
            <span class="n">blockSelectedString</span> <span class="o">=</span> <span class="s">&quot;Brick&quot;</span>
        <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">==</span> <span class="n">GRASS</span><span class="p">):</span>
            <span class="n">blockSelectedString</span> <span class="o">=</span> <span class="s">&quot;Grass&quot;</span>
        <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">==</span> <span class="n">SAND</span><span class="p">):</span>
            <span class="n">blockSelectedString</span> <span class="o">=</span> <span class="s">&quot;Sand&quot;</span>

        <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%02d</span><span class="s"> (</span><span class="si">%.2f</span><span class="s">, </span><span class="si">%.2f</span><span class="s">, </span><span class="si">%.2f</span><span class="s">) </span><span class="si">%d</span><span class="s"> / </span><span class="si">%d</span><span class="s"> Block: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">pyglet</span><span class="o">.</span><span class="n">clock</span><span class="o">.</span><span class="n">get_fps</span><span class="p">(),</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_shown</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">world</span><span class="p">),</span> 
            <span class="n">blockSelectedString</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
</pre></div>
</div>
<p>After that change is made and you run the new game with the command:</p>
<div class="highlight-python"><div class="highlight"><pre>python 03_show_current_block.py
</pre></div>
</div>
<p>Now you can see the block selected in the label like the following example:</p>
<div class="figure align-center">
<img alt="_images/BlockSelectionInLabel.png" src="_images/BlockSelectionInLabel.png" />
</div>
<p>Another GUI element that is easy to change is the target cursor.  I actually
like the target cursor in SensorCraft but I want to take this time to show you
how easy it is to change its color and size so you can customize as you see fit.
The SensorCraft code refers to the target cursor as a &#8220;reticle&#8221; which is the
same thing but is less characters to type.  First to change the color look at
the &#8220;draw_recticle&#8221; method starting on line 856:</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">draw_reticle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Draw the crosshairs in the center of the screen.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">glColor3d</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reticle</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">GL_LINES</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>The OpenGL function &#8220;glColor3d&#8221; which is imported by pyglet.gl uses the RGB
(red, green, blue) color model.  The RGB color model is simply the amount of
color to apply when it is 0 no color is applied but when it is 255 as much of
that color as possible is used.  It turns out you can represent a large number
of colors with some mixture of red, green, and blue.  If you want the reticle to
be  red change line 860 to be &#8220;glColor3d(255, 0, 0)&#8221;. How about if you want a
totally green reticle?  Then change line 860 to be &#8220;glColor3d(0, 255, 0)&#8221;.  By
default SensorCraft uses a black reticle by removing all color by setting the
RGB values all to 0, with the line 860 &#8220;glColor3d(0, 0, 0)&#8221;. If you want a white
reticle use this for line 860 &#8220;glColor3d(255, 255, 255)&#8221;.  To change the size of
the reticle simply change line 772 from &#8220;n = 10&#8221; to &#8220;n = 20&#8221; that will double
the reticles size, experiment with different size n to see which size you like
best.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">SensorCraft</a></h1>





<p>
<iframe src="https://ghbtns.com/github-btn.html?user=&repo=&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>


<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">README</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="00_flat_world.html">00 Flat World</a></li>
<li class="toctree-l1"><a class="reference internal" href="01_building_automatically.html">01 Building Automatically</a></li>
<li class="toctree-l1"><a class="reference internal" href="02_3D_coordinate_system.html">02 3D Coordinate System</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">03 Show Current Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="04_play_with_gravity.html">04 Play with Gravity</a></li>
<li class="toctree-l1"><a class="reference internal" href="05_pickling_the_world.html">05 Pickling The World</a></li>
<li class="toctree-l1"><a class="reference internal" href="06_reading_the_pickled_world.html">06 Reading the Pickled World</a></li>
<li class="toctree-l1"><a class="reference internal" href="conclusion.html">Conclusion</a></li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      
      
      
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="_sources/03_show_current_block.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>