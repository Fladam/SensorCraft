<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>05 Pickling The World &mdash; SensorCraft 1 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="SensorCraft 1 documentation" href="index.html" />
    <link rel="next" title="06 Reading the Pickled World" href="06_reading_the_pickled_world.html" />
    <link rel="prev" title="04 Play with Gravity" href="04_play_with_gravity.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="pickling-the-world">
<h1>05 Pickling The World<a class="headerlink" href="#pickling-the-world" title="Permalink to this headline">Â¶</a></h1>
<p>SensorCraft makes it fun to build objects in your world but we have no way to
save them for use in other worlds.  For this exercise we are going to  add some
new textures and create a new method that will save out the world so we can
reload it in the future.  The blocks we are going to add will be state of the
art USAF created blocks that are made out of composite material.  Composites are
now used in aircraft like the F22 Stealth Fighter and commercial aircraft. To
get started with this programming exercise first copy the file
03_show_current_block_TVR.py python code to a new file
05_pickling_the_world_TVR.py but replace TVR with your initials using the
following command:</p>
<div class="highlight-python"><div class="highlight"><pre>cp 03_show_current_block_TVR.py 05_pickling_the_world_TVR.py
</pre></div>
</div>
<p>First delete lines 77 - 87 as we no longer need the numbered stone blocks.
Next we need to change the file name used for textures on line 71 change the
line to &#8220;TEXTURE_PATH = &#8216;composite_textures.png&#8217;&#8221; without the double quotes.
At line 77 you want to add the new composite blocks so after all the changes
above line 71 - 83 should look like the following chunk of code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">TEXTURE_PATH</span> <span class="o">=</span> <span class="s">&#39;composite_textures.png&#39;</span>

<span class="n">GRASS</span> <span class="o">=</span> <span class="n">tex_coords</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">SAND</span> <span class="o">=</span> <span class="n">tex_coords</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">BRICK</span> <span class="o">=</span> <span class="n">tex_coords</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">STONE</span> <span class="o">=</span> <span class="n">tex_coords</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">COMPOSITE_RED</span> <span class="o">=</span> <span class="n">tex_coords</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">COMPOSITE_BLUE</span> <span class="o">=</span> <span class="n">tex_coords</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">COMPOSITE_BLACK</span> <span class="o">=</span> <span class="n">tex_coords</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">COMPOSITE_GREY</span> <span class="o">=</span> <span class="n">tex_coords</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">COMPOSITE_GREEN</span> <span class="o">=</span> <span class="n">tex_coords</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<p>Next we need to remove the code that placed the numbered stone blocks to
form the number lines on the axis in exercise 3.  Your _initialize method
should look like the following after all the code has been deleted:</p>
<div class="highlight-python"><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">_initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Initialize the world by placing all the blocks.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">80</span>  <span class="c"># 1/2 width and height of world</span>
        <span class="n">s</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c"># step size</span>
        <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c"># initial y height</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="o">-</span><span class="n">n</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="o">-</span><span class="n">n</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
                <span class="c"># create a layer stone an grass everywhere.</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_block</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="mi">2</span><span class="p">,</span> <span class="n">z</span><span class="p">),</span> <span class="n">GRASS</span><span class="p">,</span> <span class="n">immediate</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_block</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="mi">3</span><span class="p">,</span> <span class="n">z</span><span class="p">),</span> <span class="n">STONE</span><span class="p">,</span> <span class="n">immediate</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="o">-</span><span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="ow">or</span> <span class="n">z</span> <span class="ow">in</span> <span class="p">(</span><span class="o">-</span><span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
                    <span class="c"># create outer walls.</span>
                    <span class="k">for</span> <span class="n">dy</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">add_block</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">dy</span><span class="p">,</span> <span class="n">z</span><span class="p">),</span> <span class="n">STONE</span><span class="p">,</span> <span class="n">immediate</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<p>We now have to add the new composite blocks to our character&#8217;s inventory so
modify line 472 so it looks like the following:</p>
<div class="highlight-python"><div class="highlight"><pre>        <span class="c"># A list of blocks the player can place. Hit num keys to cycle.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inventory</span> <span class="o">=</span> <span class="p">[</span><span class="n">BRICK</span><span class="p">,</span> <span class="n">GRASS</span><span class="p">,</span> <span class="n">SAND</span><span class="p">,</span> <span class="n">COMPOSITE_RED</span><span class="p">,</span> <span class="n">COMPOSITE_BLUE</span><span class="p">,</span> <span class="n">COMPOSITE_BLACK</span><span class="p">,</span> <span class="n">COMPOSITE_GREY</span><span class="p">,</span> <span class="n">COMPOSITE_GREEN</span><span class="p">]</span>
</pre></div>
</div>
<p>Recall back to the exercise 03_show_current_block and consider what
modifications need to be made to the draw_label method.  Within the
if/else block you need to make adjustments for the new composite
blocks that we added your new draw_label method should be something
like:</p>
<div class="highlight-python"><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">draw_label</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Draw the label in the top left of the screen. Label includes</span>
<span class="sd">            the current block selection.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># determines the current block selected</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">==</span> <span class="n">BRICK</span><span class="p">:</span>
            <span class="n">blockSelectedString</span> <span class="o">=</span> <span class="s">&quot;Brick&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">==</span> <span class="n">GRASS</span><span class="p">:</span>
            <span class="n">blockSelectedString</span> <span class="o">=</span> <span class="s">&quot;Grass&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">==</span> <span class="n">SAND</span><span class="p">:</span>
            <span class="n">blockSelectedString</span> <span class="o">=</span> <span class="s">&quot;Sand&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">==</span> <span class="n">COMPOSITE_RED</span><span class="p">:</span>
            <span class="n">blockSelectedString</span> <span class="o">=</span> <span class="s">&quot;Composite Red&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">==</span> <span class="n">COMPOSITE_BLUE</span><span class="p">:</span>
            <span class="n">blockSelectedString</span> <span class="o">=</span> <span class="s">&quot;Composite Blue&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">==</span> <span class="n">COMPOSITE_BLACK</span><span class="p">:</span>
            <span class="n">blockSelectedString</span> <span class="o">=</span> <span class="s">&quot;Composite Black&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">==</span> <span class="n">COMPOSITE_GREY</span><span class="p">:</span>
            <span class="n">blockSelectedString</span> <span class="o">=</span> <span class="s">&quot;Composite Grey&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">==</span> <span class="n">COMPOSITE_GREEN</span><span class="p">:</span>
            <span class="n">blockSelectedString</span> <span class="o">=</span> <span class="s">&quot;Composite Green&quot;</span>

        <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%02d</span><span class="s"> (</span><span class="si">%.2f</span><span class="s">, </span><span class="si">%.2f</span><span class="s">, </span><span class="si">%.2f</span><span class="s">) </span><span class="si">%d</span><span class="s"> / </span><span class="si">%d</span><span class="s"> Block: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">pyglet</span><span class="o">.</span><span class="n">clock</span><span class="o">.</span><span class="n">get_fps</span><span class="p">(),</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_shown</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">world</span><span class="p">),</span> 
            <span class="n">blockSelectedString</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
</pre></div>
</div>
<p>How do we tell the game that it can save the world?  We could spend time and
write a complicated menu system that lets a user enter a file name, but since
we are just starting out lets deploy a simple solution.  Once such solution
is to simply press a key, in this case the &#8220;L&#8221; key and the method
pickle_world will be called from the model class.  Below is what the new
on_key_press method will look like, take note of the last elif:</p>
<div class="highlight-python"><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">on_key_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">modifiers</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Called when the player presses a key. See pyglet docs for key</span>
<span class="sd">        mappings.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        symbol : int</span>
<span class="sd">            Number representing the key that was pressed.</span>
<span class="sd">        modifiers : int</span>
<span class="sd">            Number representing any modifying keys that were pressed.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">symbol</span> <span class="o">==</span> <span class="n">key</span><span class="o">.</span><span class="n">W</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">strafe</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">symbol</span> <span class="o">==</span> <span class="n">key</span><span class="o">.</span><span class="n">S</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">strafe</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">symbol</span> <span class="o">==</span> <span class="n">key</span><span class="o">.</span><span class="n">A</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">strafe</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">symbol</span> <span class="o">==</span> <span class="n">key</span><span class="o">.</span><span class="n">D</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">strafe</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">symbol</span> <span class="o">==</span> <span class="n">key</span><span class="o">.</span><span class="n">SPACE</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dy</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dy</span> <span class="o">=</span> <span class="n">JUMP_SPEED</span>
        <span class="k">elif</span> <span class="n">symbol</span> <span class="o">==</span> <span class="n">key</span><span class="o">.</span><span class="n">ESCAPE</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_exclusive_mouse</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">symbol</span> <span class="o">==</span> <span class="n">key</span><span class="o">.</span><span class="n">TAB</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">flying</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">flying</span>
        <span class="k">elif</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_keys</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="p">(</span><span class="n">symbol</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_keys</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inventory</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inventory</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">symbol</span> <span class="o">==</span> <span class="n">key</span><span class="o">.</span><span class="n">B</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buildWall</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">symbol</span> <span class="o">==</span> <span class="n">key</span><span class="o">.</span><span class="n">L</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">pickle_world</span><span class="p">()</span>
</pre></div>
</div>
<p>Finally we implement the method that will save our world, or parts of the world
we care about.  First a little background, Python has this incredibly powerful
data structure called a dictionary.  Dictionaries allow a programmer to
associate a key to any given value.  In our case the key is X, Y, Z position of
the block and the value is the type of block like COMPOSITE_RED, COMPOSITE_BLUE,
COMPOSITE_BLACK, SAND, GRASS, BRICK, etc. You can learn more about dictionaries
in Python by reading the <a class="reference external" href="https://docs.python.org/2/tutorial/datastructures.html#dictionaries">data structure dictionary documentation page</a>.  Pickle
is another powerful capability that the Python language brings to you the
programmer, it allows you to easily save  Python objects to disk. Python objects
include almost any variable, function, or data structure including dictionaries.
We encourage you to take a look at the Python documentation page on <a class="reference external" href="https://docs.python.org/2/library/pickle.html?highlight=pickle#module-pickle">pickle</a>.  Now we can put a complete method together to pickle our world which
we have aptly called pickle_world which is shown below.  First we create a new
dictionary called composite_world with the line &#8220;composite_world = {}&#8221;, then we
use a for loop to iterate over the entire world.  A large if statement with a
number of logical &#8220;or&#8221; are used to filter out only the blocks we want saved.  If
a block is found of the <a href="#id1"><span class="problematic" id="id2">COMPOSITE_</span></a> type then we save it to the dictionary called
composite_world.  Finally outside of the for loop we open a new file called
composite_world.pkl and dump the dictionary composite_world to it.  We could of
used a call to the &#8220;open&#8221; function but we used the Python &#8220;with&#8221;  statement
which will make sure the file is first opened correctly and then the file is
automatically closed when the with statement completes. Append the function
below to the bottom of the world class around line 413:</p>
<div class="highlight-python"><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">pickle_world</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; this method will pickle the world....it will take some time</span>
<span class="sd">            depending on how many blocks a user has used.  We need to filter</span>
<span class="sd">            for just the composite blocks.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">composite_world</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">world_key</span><span class="p">,</span> <span class="n">world_value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">world_value</span> <span class="o">==</span> <span class="n">COMPOSITE_RED</span> <span class="ow">or</span>
                <span class="n">world_value</span> <span class="o">==</span> <span class="n">COMPOSITE_BLUE</span> <span class="ow">or</span>
                <span class="n">world_value</span> <span class="o">==</span> <span class="n">COMPOSITE_BLACK</span> <span class="ow">or</span>
                <span class="n">world_value</span> <span class="o">==</span> <span class="n">COMPOSITE_GREY</span> <span class="ow">or</span>
                <span class="n">world_value</span> <span class="o">==</span> <span class="n">COMPOSITE_GREEN</span><span class="p">):</span>
                <span class="n">composite_world</span><span class="p">[</span><span class="n">world_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">world_value</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;composite_world.pkl&#39;</span><span class="p">,</span> <span class="s">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">output</span><span class="p">:</span>
            <span class="n">cPickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">composite_world</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span>
</pre></div>
</div>
<p>For the pickle module to work we have to import the cPickle module by adding
a line at the top of the program around line 4:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">cPickle</span>
</pre></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">SensorCraft</a></h1>





<p>
<iframe src="https://ghbtns.com/github-btn.html?user=&repo=&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>


<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">README</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="00_flat_world.html">00 Flat World</a></li>
<li class="toctree-l1"><a class="reference internal" href="01_building_automatically.html">01 Building Automatically</a></li>
<li class="toctree-l1"><a class="reference internal" href="02_3D_coordinate_system.html">02 3D Coordinate System</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_show_current_block.html">03 Show Current Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="04_play_with_gravity.html">04 Play with Gravity</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">05 Pickling The World</a></li>
<li class="toctree-l1"><a class="reference internal" href="06_reading_the_pickled_world.html">06 Reading the Pickled World</a></li>
<li class="toctree-l1"><a class="reference internal" href="conclusion.html">Conclusion</a></li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      
      
      
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="_sources/05_pickling_the_world.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>